---
layout: post
title: Loaders and Web Requests
date: 2012-08-31
comments: false
---

<h1>{{ page.title }}</h1>
<div class='post'>
<p>So why shouldn't you use Loaders to perform network requests? There are a couple of reasons:</p> <ol> <p><li value="1"><b>You need to have an internet connection in order for your application to work.</b> Since the Loader's data source is the network itself, your application won't be able to display anything to the user when offline.</li></p> <p><li value="2"><b>Loaders are specific to an Activity/Fragment (FOOTNOTE HERE).</b> In other words, your application will only be able to load new data when the Activity/Fragment is being displayed. There is no reliable way to retrieve data from the network in the background (i.e. no background notifications either).</li></p> <p><li value="3"><b>The Loader will periodically poll for new data.</b> This can be heavy on the battery (since it involves making repeated and sometimes unnecessary network requests for new data). New data will not be received in realtime. Of course, it's technically not "incorrect" to implement a Loader that does this... but it is definitely less than ideal and annoying for users like me who expect their apps to work even when offline. This model could potentially drain your battery pretty fast too.</li></p> </ol> <p>With that in mind, the simplest way to correct these issues is to:</p> <ul> <p><li>Use a Service and periodically poll the network for data, inserting new data into a ContentProvider.</li></p> <p><li>Use a CursorLoader to load data from the ContentProvider. The Activity/Fragment will simply trust the Service to keep the ContentProvider up-to-date.</li></p> </ul> <p>However, even using a Service to poll the third-party service for new data isn't the most desirable solution, in my opinion. The best way to sync with a third-party service (and this is the way the native Google apps like Gmail and GTalk achieve it too) is to erase the need to poll for new data by implementing a SyncAdapter and having new data pushed to your device with Google Cloud Messaging. This is obviously a lot more work, but between you and me, it's incredibly satisfying when you finally pull it off.</p> ***********************  you'd have to use AsyncTaskLoader#setUpdateThrottle(long delayMS) to periodically poll the server for an entirely new data set within your Activity/Fragment).  What you said sounds correct. To be more specific though, the problem with using a Loader to perform network operations is that (1) you won't be able to display any data without an internet connection, and (2) there's obviously no way of registering an observer with the server in this case... (you'd have to use AsyncTaskLoader#setUpdateThrottle(long delayMS) to periodically poll the server for an entirely new data set within your Activity/Fragment).    There is a nice Google I/O 2010 talk which discusses almost all of this in detail (they don't talk about Loaders directly, but all of the information still applies). You should check it out! Google I/O 2010 - Android REST client applicationsï»¿</div>
<h2>Comments</h2>
<div class='comments'>
</div>
